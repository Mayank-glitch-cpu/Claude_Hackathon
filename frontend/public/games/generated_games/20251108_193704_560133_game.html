<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hash Harbor: Dock the Data</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .game-area {
            min-height: 400px;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #ddd;
        }
        button {
            padding: 12px 24px;
            margin: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .challenge {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 3px solid #667eea;
        }
        .challenge h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Hash Harbor: Dock the Data</h1>
        <p class="subtitle">Interactive Learning Game</p>
        <div class="info-box">
            <strong>ðŸ“š Learning Goal:</strong> Students will accurately predict and explain how hash tables map keys to indices using a given hash function, handle collisions via chaining and open addressing (linear, quadratic, and double hashing), reason about load factor and expected probes, and trace/update table state across inserts, searches, and deletions (including tombstones).
        </div>
        <div class="game-area">
            <p>Youâ€™re the harbor master of a neon archipelago where every cargo ship carries a coded crate ID. The Tidal Indexer (your hash engine) tells ships which slip to dock in, but collisions cause traffic jams you must resolve with different docking rules. Keep the harbor efficient by choosing smart policies as storms (randomized keys and sizes) constantly change the tides.</p>
            
        </div>
        <div class="challenge">
            <h3>ðŸŽ¯ Challenge</h3>
            <p>Given m = 11 and Double Hashing with h1(k) = k mod 11 and h2(k) = 1 + (k mod 9), the current table has: slot 1: 34, slot 2: tombstone (deleted key 13), slot 3: 24, slot 5: 15, slot 7: 18, slot 9: 20; all other slots empty. 1) Insert key 46. What probe sequence occurs and in which slot does 46 finally reside under standard tombstone handling (record first tombstone, continue until empty or key found, then insert at first tombstone)? 2) Search for key 13 afterward. What probe sequence occurs and why must the search continue past the tombstone?</p>
        </div>
    </div>
    <script>
        function handleAction(action) {
            alert('Game interaction: ' + action);
        }
    </script>

    <script>
        // Inject LLM-generated story content after page loads
        (function() {
            // Wait for DOM to be ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', injectStoryContent);
            } else {
                injectStoryContent();
            }
            
            function injectStoryContent() {
                // Update learning goal using the span with ID
                const learningGoalSpan = document.getElementById('learning-goal-text');
                if (learningGoalSpan && 'Students will accurately predict and explain how hash tables map keys to indices using a given hash function, handle collisions via chaining and open addressing (linear, quadratic, and double hashing), reason about load factor and expected probes, and trace/update table state across inserts, searches, and deletions (including tombstones).') {
                    learningGoalSpan.textContent = 'Students will accurately predict and explain how hash tables map keys to indices using a given hash function, handle collisions via chaining and open addressing (linear, quadratic, and double hashing), reason about load factor and expected probes, and trace/update table state across inserts, searches, and deletions (including tombstones).';
                }
                
                // Update challenge question using the paragraph with ID
                const challengeQuestionP = document.getElementById('challenge-question-text');
                if (challengeQuestionP && 'Given m = 11 and Double Hashing with h1(k) = k mod 11 and h2(k) = 1 + (k mod 9), the current table has: slot 1: 34, slot 2: tombstone (deleted key 13), slot 3: 24, slot 5: 15, slot 7: 18, slot 9: 20; all other slots empty. 1) Insert key 46. What probe sequence occurs and in which slot does 46 finally reside under standard tombstone handling (record first tombstone, continue until empty or key found, then insert at first tombstone)? 2) Search for key 13 afterward. What probe sequence occurs and why must the search continue past the tombstone?') {
                    challengeQuestionP.innerHTML = 'Given m = 11 and Double Hashing with h1(k) = k mod 11 and h2(k) = 1 + (k mod 9), the current table has: slot 1: 34, slot 2: tombstone (deleted key 13), slot 3: 24, slot 5: 15, slot 7: 18, slot 9: 20; all other slots empty. 1) Insert key 46. What probe sequence occurs and in which slot does 46 finally reside under standard tombstone handling (record first tombstone, continue until empty or key found, then insert at first tombstone)? 2) Search for key 13 afterward. What probe sequence occurs and why must the search continue past the tombstone?';
                }
                
                // Also update challenge question in BFS template
                const challengeQuestionSpan = document.querySelector('#challenge-question-text');
                if (challengeQuestionSpan && 'Given m = 11 and Double Hashing with h1(k) = k mod 11 and h2(k) = 1 + (k mod 9), the current table has: slot 1: 34, slot 2: tombstone (deleted key 13), slot 3: 24, slot 5: 15, slot 7: 18, slot 9: 20; all other slots empty. 1) Insert key 46. What probe sequence occurs and in which slot does 46 finally reside under standard tombstone handling (record first tombstone, continue until empty or key found, then insert at first tombstone)? 2) Search for key 13 afterward. What probe sequence occurs and why must the search continue past the tombstone?') {
                    challengeQuestionSpan.innerHTML = 'Given m = 11 and Double Hashing with h1(k) = k mod 11 and h2(k) = 1 + (k mod 9), the current table has: slot 1: 34, slot 2: tombstone (deleted key 13), slot 3: 24, slot 5: 15, slot 7: 18, slot 9: 20; all other slots empty. 1) Insert key 46. What probe sequence occurs and in which slot does 46 finally reside under standard tombstone handling (record first tombstone, continue until empty or key found, then insert at first tombstone)? 2) Search for key 13 afterward. What probe sequence occurs and why must the search continue past the tombstone?';
                }
                
                // Update subtitle if it exists and seems generic
                const subtitle = document.querySelector('.subtitle');
                if (subtitle && 'Youâ€™re the harbor master of a neon archipelago where every cargo ship carries a coded crate ID. The Tidal Indexer (your hash engine) tells ships which slip to dock in, but collisions cause traffic jams you must resolve with different docking rules. Keep the harbor efficient by choosing smart policies as storms (randomized keys and sizes) constantly change the tides.') {
                    const currentSubtitle = subtitle.textContent || '';
                    if (currentSubtitle.includes('Master') || currentSubtitle.includes('interactive') || currentSubtitle.length < 50) {
                        subtitle.textContent = 'Youâ€™re the harbor master of a neon archipelago where every cargo ship carries a coded crate ID. The Tidal Indexer (your hash engine) tells ships which slip to dock in, but collisions cause traffic jams you must resolve with different docking rules. Keep the harbor efficient by choosing smart policies as storms (randomized keys and sizes) constantly change the tides.';
                    }
                }
                
                // Update title if h1 exists
                const h1Title = document.querySelector('h1');
                if (h1Title && 'Hash Harbor: Dock the Data') {
                    // Only update if title seems generic
                    const currentTitle = h1Title.textContent || '';
                    if (currentTitle.includes('Arena') || currentTitle.includes('Game') || currentTitle.length < 20) {
                        h1Title.textContent = 'Hash Harbor: Dock the Data';
                    }
                }
            }
        })();
    </script>
    </body>
</html>